<div id="off-canvas-nav" class="z-50 fixed top-0 left-0 right-0 bottom-0 bg-white py-8 overflow-y-scroll max-h-screen">
  <div class="flex justify-between items-center mb-12 px-4" on-swipe-right="toggleOffCanvasNav">
    <a href="/" class="flex items-center">
      <img src="/images/pl_research_logo.svg" class="h-20 mr-2 flex-shrink-0">
    </a>

    <div class="mr-2 flex-shrink-0" on-click="toggleOffCanvasNav">
      {{ partial "icons/close.svg" (dict "class" "fill-current")}}
    </div>
  </div>

  {{ $currentPage := . }}
  {{ range .Site.Menus.main }}
    <div class="relative pt-4 mb-4">

      <a href="{{ .URL }}" class="font-light text-md relative inline-block align-middle mx-4 mb-4">
        <span>{{ .Name }}</span>

        {{if or ($currentPage.IsMenuCurrent "main" .) }}
          <div class="absolute inset-x-0 bottom-0 border border-black"></div>
        {{end}}
      </a>

      {{ if .HasChildren }}
        <div class="flex flex-col items-start justify-start mb-4 pl-8 pt-4">
          {{ range .Children }}
            <a href="{{ .URL }}" class="inline-block font-light relative mb-4 text-gray-700">
              <span>{{ .Name }}</span>

              {{if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }}
                <div class="absolute inset-x-0 bottom-0 border border-black"></div>
              {{end}}
            </a>
          {{ end }}
        </div>
      {{end}}
    </div>
  {{ end }}
</div>
